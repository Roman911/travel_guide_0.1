{"ast":null,"code":"import _slicedToArray from \"D:/web/travel_guide/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\web\\\\travel_guide\\\\client\\\\modules\\\\Likes\\\\Containers\\\\Likes.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useMutation } from '@apollo/react-hooks';\nimport { Like } from '../Components/Like';\nimport { addLikeMutation, removeLikeMutation } from './mutations';\nimport { modalActions } from \"../../../redux/actions\";\nexport var Likes = function Likes(_ref) {\n  _s();\n\n  var id = _ref.id,\n      likes = _ref.likes,\n      post = _ref.post;\n\n  var _useState = useState(likes.length),\n      quantityLikes = _useState[0],\n      setQuantityLikes = _useState[1];\n\n  var _useState2 = useState(false),\n      userLike = _useState2[0],\n      setUserLike = _useState2[1];\n\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  var dispatch = useDispatch();\n  var data = user.data;\n  var userId = data ? data.userId : undefined;\n  useEffect(function () {\n    likes.filter(function (item) {\n      if (item === userId) {\n        setUserLike(true);\n      } else {\n        setUserLike(false);\n      }\n    });\n  }, [likes, userId]);\n\n  var _useMutation = useMutation(addLikeMutation),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      addLike = _useMutation2[0];\n\n  var _useMutation3 = useMutation(removeLikeMutation),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      removeLike = _useMutation4[0];\n\n  var handleChangeAdd = function handleChangeAdd() {\n    if (userId) {\n      setQuantityLikes(quantityLikes + 1);\n      setUserLike(true);\n      addLike({\n        variables: {\n          postId: id,\n          userId: userId\n        }\n      }).then(function (r) {\n        return r;\n      });\n    } else {\n      dispatch(modalActions.showModal('Для виконання данної дії потрібно авторизоватись'));\n    }\n  };\n\n  var handleChangeRemove = function handleChangeRemove() {\n    setQuantityLikes(quantityLikes - 1);\n    setUserLike(false);\n    removeLike({\n      variables: {\n        postId: id,\n        userId: userId\n      }\n    }).then(function (r) {\n      return r;\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Like, {\n    post: post,\n    quantityLikes: quantityLikes,\n    userLike: userLike,\n    handleChangeAdd: handleChangeAdd,\n    handleChangeRemove: handleChangeRemove\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 10\n  }, _this);\n};\n\n_s(Likes, \"jC1tDRw4IFuWc953K8gAj2Ph5oo=\", false, function () {\n  return [useSelector, useDispatch, useMutation, useMutation];\n});\n\n_c = Likes;\n\nvar _c;\n\n$RefreshReg$(_c, \"Likes\");","map":{"version":3,"sources":["D:/web/travel_guide/client/modules/Likes/Containers/Likes.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","useMutation","Like","addLikeMutation","removeLikeMutation","modalActions","Likes","id","likes","post","length","quantityLikes","setQuantityLikes","userLike","setUserLike","user","state","dispatch","data","userId","undefined","filter","item","addLike","removeLike","handleChangeAdd","variables","postId","then","r","showModal","handleChangeRemove"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useMutation } from '@apollo/react-hooks'\r\nimport { Like } from '../Components/Like'\r\nimport { addLikeMutation, removeLikeMutation } from './mutations'\r\nimport { modalActions } from \"../../../redux/actions\"\r\n\r\nimport { User } from \"../../../types/user\"\r\ntype MyLikesProps = {\r\n  id: string\r\n  likes: string[]\r\n  post: boolean\r\n}\r\n\r\nexport const Likes:React.FC<MyLikesProps> = ({ id, likes, post }) => {\r\n  const [ quantityLikes, setQuantityLikes ] = useState(likes.length)\r\n  const [ userLike, setUserLike ] = useState(false)\r\n  const user = useSelector((state: { user: User }) => state.user)\r\n  const dispatch = useDispatch()\r\n  const { data } = user\r\n  const userId = data ? data.userId : undefined\r\n\r\n  useEffect(() => {\r\n    likes.filter((item: string | undefined) => {\r\n      if (item === userId) {\r\n        setUserLike(true)\r\n      } else {\r\n        setUserLike(false)\r\n      }\r\n    })\r\n  }, [likes, userId])\r\n\r\n  const [ addLike ] = useMutation(addLikeMutation)\r\n  const [ removeLike ] = useMutation(removeLikeMutation)\r\n\r\n  const handleChangeAdd = () => {\r\n    if (userId) {\r\n      setQuantityLikes(quantityLikes +1)\r\n      setUserLike(true)\r\n      addLike({\r\n        variables: { postId: id, userId: userId },\r\n      }).then(r =>r)\r\n    } else {\r\n      dispatch(modalActions.showModal('Для виконання данної дії потрібно авторизоватись'))\r\n    }\r\n  }\r\n  const handleChangeRemove = () => {\r\n    setQuantityLikes(quantityLikes -1)\r\n    setUserLike(false)\r\n    removeLike({\r\n      variables: { postId: id, userId: userId }\r\n    })\r\n      .then(r =>r)\r\n  }\r\n  return <Like post={ post } quantityLikes={ quantityLikes } userLike={ userLike } handleChangeAdd={ handleChangeAdd } handleChangeRemove={ handleChangeRemove }/>\r\n}"]},"metadata":{},"sourceType":"module"}