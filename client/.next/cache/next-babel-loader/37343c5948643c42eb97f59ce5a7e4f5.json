{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\web\\\\travel_guide\\\\client\\\\modules\\\\GoogleMaps\\\\Containers\\\\GoogleMaps.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useRouter } from \"next/router\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { GoogleMap, useLoadScript } from '@react-google-maps/api';\nimport { Spin } from \"../../../Components\";\nimport { LocationInformation } from \"../../\";\nimport { Search } from \"../../../Containers/GoogleMaps/Search\";\nimport { MarkersController } from '../Components/MarkersController';\nvar libraries = [\"places\"];\nexport var GoogleMaps = function GoogleMaps(_ref) {\n  _s();\n\n  var mapContainerStyle = _ref.mapContainerStyle,\n      center = _ref.center,\n      zoom = _ref.zoom,\n      locations = _ref.locations,\n      disableDefaultUI = _ref.disableDefaultUI,\n      click = _ref.click,\n      search = _ref.search,\n      isType = _ref.isType;\n\n  var _useLoadScript = useLoadScript({\n    googleMapsApiKey: process.env.GOOGLE_MAPS_KAY,\n    // @ts-ignore\n    libraries: libraries\n  }),\n      isLoaded = _useLoadScript.isLoaded,\n      loadError = _useLoadScript.loadError;\n\n  var router = useRouter();\n\n  var _useState = useState(null),\n      optionsMarker = _useState[0],\n      setOptionsMarker = _useState[1];\n\n  var _useState2 = useState('MarkersMap'),\n      controlMarker = _useState2[0],\n      setControlMarker = _useState2[1];\n\n  useEffect(function () {\n    if (Object.keys(router.query).length !== 0) {\n      setOptionsMarker(router.query);\n      setControlMarker('MarkerQuery');\n    }\n  }, [router]);\n  console.log(optionsMarker, controlMarker);\n  var mapRef = useRef();\n  var onMapLoad = useCallback(function (map) {\n    mapRef.current = map;\n  }, []);\n  var panTo = useCallback(function (_ref2) {\n    var lat = _ref2.lat,\n        lng = _ref2.lng;\n    // @ts-ignore\n    mapRef.current.panTo({\n      lat: lat,\n      lng: lng\n    }); // @ts-ignore\n\n    mapRef.current.setZoom(12);\n    setControlMarker('SearchMarker');\n  }, []);\n\n  var _useState3 = useState(null),\n      marker = _useState3[0],\n      setMarker = _useState3[1];\n\n  var _useState4 = useState(null),\n      selectedPark = _useState4[0],\n      setSelectedPark = _useState4[1];\n\n  var _useState5 = useState(false),\n      closeWindow = _useState5[0],\n      setCloseWindow = _useState5[1];\n\n  var handleClick = useCallback(function () {\n    setCloseWindow(true);\n    setTimeout(function () {\n      setSelectedPark(null);\n      setCloseWindow(false);\n    }, 700);\n  }, []);\n  var options = {\n    disableDefaultUI: disableDefaultUI\n  };\n\n  var renderMap = function renderMap() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        width: '100%'\n      },\n      children: [search && /*#__PURE__*/_jsxDEV(Search, {\n        panTo: panTo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 19\n      }, _this), /*#__PURE__*/_jsxDEV(GoogleMap, {\n        mapContainerStyle: mapContainerStyle,\n        zoom: zoom,\n        center: center,\n        options: options,\n        onLoad: onMapLoad,\n        onClick: click ? function (event) {\n          click(event);\n          setMarker({\n            lat: event.latLng.lat(),\n            lng: event.latLng.lng()\n          });\n        } : null,\n        children: [selectedPark && /*#__PURE__*/_jsxDEV(LocationInformation, {\n          _id: selectedPark,\n          handleClick: handleClick,\n          closeWindow: closeWindow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 27\n        }, _this), /*#__PURE__*/_jsxDEV(MarkersController, {\n          control: controlMarker,\n          options: optionsMarker\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 12\n    }, _this);\n  };\n\n  if (loadError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u041D\\u0435\\u043C\\u043E\\u0436\\u043B\\u0438\\u0432\\u043E \\u0437\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0438\\u0442\\u0438 \\u043A\\u0430\\u0440\\u0442\\u0443\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 12\n    }, _this);\n  }\n\n  return isLoaded ? renderMap() : /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 35\n  }, _this);\n};\n\n_s(GoogleMaps, \"8laIbNeo6a+knLS6+OXb16WoL0I=\", false, function () {\n  return [useLoadScript, useRouter];\n});\n\n_c = GoogleMaps;\n\nvar _c;\n\n$RefreshReg$(_c, \"GoogleMaps\");","map":{"version":3,"sources":["D:/web/travel_guide/client/modules/GoogleMaps/Containers/GoogleMaps.tsx"],"names":["useRouter","React","useCallback","useEffect","useRef","useState","GoogleMap","useLoadScript","Spin","LocationInformation","Search","MarkersController","libraries","GoogleMaps","mapContainerStyle","center","zoom","locations","disableDefaultUI","click","search","isType","googleMapsApiKey","process","env","GOOGLE_MAPS_KAY","isLoaded","loadError","router","optionsMarker","setOptionsMarker","controlMarker","setControlMarker","Object","keys","query","length","console","log","mapRef","onMapLoad","map","current","panTo","lat","lng","setZoom","marker","setMarker","selectedPark","setSelectedPark","closeWindow","setCloseWindow","handleClick","setTimeout","options","renderMap","position","width","event","latLng"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\"\r\nimport React, {useCallback, useEffect, useRef, useState} from \"react\"\r\nimport { GoogleMap, useLoadScript, Marker } from '@react-google-maps/api'\r\nimport { Spin } from \"../../../Components\"\r\nimport { LocationInformation } from \"../../\"\r\nimport { Search } from \"../../../Containers/GoogleMaps/Search\"\r\nimport { Locations } from \"../../../types/locations\"\r\n\r\nimport { MarkersController } from '../Components/MarkersController'\r\n\r\ntype MyGoogleMapsProps = {\r\n  mapContainerStyle: { height: string, width: string }\r\n  center: { lat: number, lng: number }\r\n  zoom: number\r\n  locations?: Locations\r\n  disableDefaultUI: boolean\r\n  click?: (event) => any\r\n  search: boolean\r\n  isType?: string | null\r\n}\r\ntype latLng = {\r\n  lat: number\r\n  lng: number\r\n}\r\n\r\nconst libraries = [\"places\"]\r\n\r\nexport const GoogleMaps: React.FC<MyGoogleMapsProps> = ({ mapContainerStyle, center, zoom, locations, disableDefaultUI, click, search, isType }) => {\r\n  const { isLoaded, loadError } = useLoadScript({\r\n    googleMapsApiKey: process.env.GOOGLE_MAPS_KAY,\r\n    // @ts-ignore\r\n    libraries\r\n  })\r\n  const router = useRouter()\r\n  const [ optionsMarker, setOptionsMarker ] = useState( null )\r\n  const [ controlMarker, setControlMarker ] = useState( 'MarkersMap' )\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(router.query).length !== 0) {\r\n      setOptionsMarker(router.query)\r\n      setControlMarker('MarkerQuery')\r\n    }\r\n  }, [ router ])\r\n\r\n  console.log(optionsMarker, controlMarker)\r\n\r\n  const mapRef = useRef()\r\n  const onMapLoad = useCallback((map) => {\r\n    mapRef.current = map\r\n  }, [])\r\n  const panTo = useCallback(({ lat, lng }) => {\r\n    // @ts-ignore\r\n    mapRef.current.panTo({ lat, lng })\r\n    // @ts-ignore\r\n    mapRef.current.setZoom(12)\r\n    setControlMarker('SearchMarker')\r\n  }, [])\r\n\r\n  const [ marker, setMarker ] = useState<null | latLng>(null)\r\n  const [ selectedPark, setSelectedPark ] = useState<null | string>(null)\r\n  const [ closeWindow, setCloseWindow ] = useState<boolean>(false)\r\n  const handleClick = useCallback(() => {\r\n    setCloseWindow(true)\r\n    setTimeout(() => {\r\n      setSelectedPark(null)\r\n      setCloseWindow(false)\r\n    }, 700)\r\n  }, [])\r\n  const options = {\r\n    disableDefaultUI: disableDefaultUI\r\n  }\r\n  const renderMap = () => {\r\n    return <div style={{position: 'relative', width: '100%'}}>\r\n      { search && <Search panTo={ panTo } /> }\r\n      <GoogleMap\r\n        mapContainerStyle={ mapContainerStyle }\r\n        zoom={ zoom }\r\n        center={ center }\r\n        options={ options }\r\n        onLoad={ onMapLoad }\r\n        onClick={ click ? (event) => {\r\n          click(event)\r\n          setMarker({\r\n            lat: event.latLng.lat(),\r\n            lng: event.latLng.lng()\r\n          })\r\n        } : null}\r\n      >\r\n        { selectedPark && <LocationInformation _id={ selectedPark } handleClick={ handleClick } closeWindow={ closeWindow } /> }\r\n        {/*{ !router.query && locations && locations.map((park, index) => (*/}\r\n        {/*  <Marker*/}\r\n        {/*    key={ index }*/}\r\n        {/*    onClick={() => {*/}\r\n        {/*      setSelectedPark(park._id )*/}\r\n        {/*    }}*/}\r\n        {/*    position={{lat: Number(park.coordinates[0]), lng: Number(park.coordinates[1])}}*/}\r\n        {/*    icon={{*/}\r\n        {/*      url: `http://326b53d9806dcac09833-a590b81c812a57d0f4b1c3b1d1b7a9ea.r50.cf3.rackcdn.com/markersIcon/${park.isType}.png`*/}\r\n        {/*    }}*/}\r\n        {/*  />*/}\r\n        {/*))}*/}\r\n        {/*{ marker && <Marker*/}\r\n        {/*  position={{ lat: marker.lat, lng: marker.lng }}*/}\r\n        {/*  icon={ isType !== 'other' ? { url: `http://326b53d9806dcac09833-a590b81c812a57d0f4b1c3b1d1b7a9ea.r50.cf3.rackcdn.com/markersIcon/${isType}.png` } : null }*/}\r\n        {/*/> }*/}\r\n        <MarkersController control={ controlMarker } options={ optionsMarker } />\r\n      </GoogleMap>\r\n    </div>\r\n  }\r\n  if (loadError) {\r\n    return <div>Неможливо завантажити карту</div>\r\n  }\r\n  return isLoaded ? renderMap() : <Spin />\r\n}"]},"metadata":{},"sourceType":"module"}