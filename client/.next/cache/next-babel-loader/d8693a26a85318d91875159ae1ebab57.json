{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from \"react\";\nimport { css } from 'aphrodite/no-important';\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { getDataFromTree } from '@apollo/react-ssr';\nimport withApollo from '../lib/withApollo';\nimport { postsQuery, commentsQuery } from \"../apollo/queries/posts\";\nimport { Populars } from \"../modules\";\nimport { LoadingPost, MainLayout, News } from \"../Components\";\nimport styles from '../styles/news';\n\nconst Home = () => {\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(postsQuery);\n  if (loading) return '';\n  if (error) return `Error! ${error}`;\n  const {\n    posts\n  } = data;\n  const news = posts.map((item, index) => {\n    const {\n      loading,\n      error,\n      data\n    } = useQuery(commentsQuery, {\n      variables: {\n        postId: item._id\n      }\n    });\n    if (loading) return /*#__PURE__*/_jsx(LoadingPost, {\n      isPost: false\n    }, index);\n    if (error) return `Error! ${error}`;\n    const {\n      comments\n    } = data;\n    return /*#__PURE__*/_jsx(News, {\n      item: item,\n      comments: comments\n    }, index);\n  });\n  return /*#__PURE__*/_jsx(MainLayout, {\n    title: \"Home\",\n    header: \"\\u041D\\u043E\\u0432\\u0438\\u043D\\u0438\",\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: css(styles.wrapper),\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: css(styles.news),\n        children: news\n      }), /*#__PURE__*/_jsx(Populars, {})]\n    })\n  });\n};\n\nexport default withApollo(Home, {\n  getDataFromTree\n});","map":null,"metadata":{},"sourceType":"module"}