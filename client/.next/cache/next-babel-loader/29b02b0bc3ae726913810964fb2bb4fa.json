{"ast":null,"code":"import _regeneratorRuntime from \"D:/web/travel_guide/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/web/travel_guide/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from \"react\";\nimport { useFormik } from \"formik\";\nimport usePlacesAutocomplete, { getGeocode, getLatLng } from 'use-places-autocomplete';\nimport searchStyles from '../../styles/search';\nimport { css } from \"aphrodite/no-important\";\nexport var Search = function Search(_ref) {\n  var panTo = _ref.panTo;\n\n  var _usePlacesAutocomplet = usePlacesAutocomplete({\n    requestOptions: {\n      // @ts-ignore\n      location: {\n        lat: function lat() {\n          return 49.026151;\n        },\n        lng: function lng() {\n          return 31.483070;\n        }\n      },\n      radius: 50 * 1000\n    }\n  }),\n      ready = _usePlacesAutocomplet.ready,\n      value = _usePlacesAutocomplet.value,\n      _usePlacesAutocomplet2 = _usePlacesAutocomplet.suggestions,\n      status = _usePlacesAutocomplet2.status,\n      data = _usePlacesAutocomplet2.data,\n      setValue = _usePlacesAutocomplet.setValue,\n      clearSuggestions = _usePlacesAutocomplet.clearSuggestions;\n\n  var _useFormik = useFormik({\n    initialValues: {\n      description: ''\n    },\n    onSubmit: function () {\n      var _onSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        var results, _yield$getLatLng, lat, lng;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                setValue(values.description, false);\n                clearSuggestions();\n                _context.prev = 2;\n                _context.next = 5;\n                return getGeocode({\n                  address: values.description\n                });\n\n              case 5:\n                results = _context.sent;\n                _context.next = 8;\n                return getLatLng(results[0]);\n\n              case 8:\n                _yield$getLatLng = _context.sent;\n                lat = _yield$getLatLng.lat;\n                lng = _yield$getLatLng.lng;\n                panTo({\n                  lat: lat,\n                  lng: lng\n                });\n                _context.next = 17;\n                break;\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](2);\n                console.log(_context.t0);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 14]]);\n      }));\n\n      function onSubmit(_x) {\n        return _onSubmit.apply(this, arguments);\n      }\n\n      return onSubmit;\n    }()\n  }),\n      handleSubmit = _useFormik.handleSubmit,\n      handleChange = _useFormik.handleChange,\n      handleBlur = _useFormik.handleBlur;\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: css(searchStyles.wrapper),\n    children: /*#__PURE__*/_jsxs(\"form\", {\n      onClick: handleSubmit,\n      className: css(searchStyles.form),\n      children: [/*#__PURE__*/_jsx(\"input\", {\n        className: css(searchStyles.input),\n        type: \"text\",\n        value: value,\n        onChange: function onChange(e) {\n          setValue(e.target.value);\n        },\n        disabled: !ready,\n        placeholder: \"\\u041F\\u043E\\u0448\\u0443\\u043A \\u043D\\u0430 Google \\u041A\\u0430\\u0440\\u0442\\u0430\\u0445\"\n      }), data.length !== 0 ? /*#__PURE__*/_jsx(\"select\", {\n        className: css(searchStyles.select),\n        size: data.length,\n        id: \"description\",\n        name: \"description\",\n        onChange: handleChange,\n        onBlur: handleBlur,\n        children: status === 'OK' && data.map(function (value, index) {\n          return /*#__PURE__*/_jsx(\"option\", {\n            className: css(searchStyles.option),\n            value: value.description,\n            children: value.description\n          }, index);\n        })\n      }) : null]\n    })\n  });\n};","map":null,"metadata":{},"sourceType":"module"}