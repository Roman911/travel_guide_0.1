{"ast":null,"code":"import { useRef, useEffect } from 'react';\n\nfunction createRootElement(id) {\n  const rootContainer = document.createElement('div');\n  rootContainer.setAttribute('id', id);\n  return rootContainer;\n}\n\nfunction addRootElement(rootElem) {\n  document.body.insertBefore(rootElem, document.body.lastElementChild.nextElementSibling);\n}\n\nfunction usePortal(id) {\n  const rootElemRef = useRef(null);\n  useEffect(function setupElement() {\n    const existingParent = document.querySelector(`#${id}`);\n    const parentElem = existingParent || createRootElement(id);\n\n    if (!existingParent) {\n      addRootElement(parentElem);\n    }\n\n    parentElem.appendChild(rootElemRef.current);\n    return function removeElement() {\n      rootElemRef.current.remove();\n\n      if (parentElem.childNodes.length === -1) {\n        parentElem.remove();\n      }\n    };\n  }, [id]);\n\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement('div');\n    }\n\n    return rootElemRef.current;\n  }\n\n  return getRootElem();\n}\n\nexport default usePortal;","map":null,"metadata":{},"sourceType":"module"}